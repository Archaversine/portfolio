<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>My Hakyll Blog - Automatic Type Differentiation in Haskell</title>
        <link rel="stylesheet" href="../css/default.css" />
        <link rel="stylesheet" href="../css/syntax.css" />
        <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <header>
            <div class="logo">
                <a href="../">My Hakyll Blog</a>
            </div>
            <nav>
                <a href="../">Home</a>
                <a href="../about.html">About</a>
                <a href="../contact.html">Contact</a>
                <a href="../archive.html">Archive</a>
            </nav>
        </header>

        <main role="main">
            <h1>Automatic Type Differentiation in Haskell</h1>
            <article>
    <section class="header">
        Posted on October 26, 2025
        
            by Adam Brohl
        
    </section>
    <section>
        <h2 id="algebra-of-types">Algebra of Types</h2>
<p>Haskell is one of the few programming languages that fully supports Algebraic
Data Types (ADTs) without requiring silly workarounds. As one might expect,
ADTs have algebraic properties similar to algebra with numbers. These operations
include addition, multiplication, exponentiation, and even differentiation. This
post explores how to implement automatic type differentiation in Haskell.</p>
<h3 id="type-cardinality">Type Cardinality</h3>
<p>When working with types, an often useful piece of information to know is how
many valid inhabitants (the cardinality) a type has. For example, a boolean
has exactly two valid inhabitants: true and false. The cardinality of a type
<span class="math inline">\(T\)</span> is represented by the notation <span class="math inline">\(|T|\)</span>. If two different types have the same
cardinality, they are said to be isomorphic. This is because a bidirectional
one-to-one mapping can be constructed between both types.</p>
<p>Let’s start with one of the simplest types in Haskell: the unit type. The unit
type (written as <code>()</code>) has exactly one inhabitant: <code>()</code>. Because of this,
the cardinality of the unit type is one (<span class="math inline">\(|()| = 1\)</span>). When performing
multiplication, the unit type can be thought of as an identity value.</p>
<p>The next interesting type is the sum type. The most common sum type in Haskell
is the <code>Either</code> type:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">Either</span> a b <span class="ot">=</span> <span class="dt">Left</span> a <span class="op">|</span> <span class="dt">Right</span> b</span></code></pre></div>
<p>To determine the cardinality of this type, lets look at <code>Either</code> with some
types we’ve already looked at: unit and boolean (<code>Either () Bool</code>). Looking
at the <code>Left</code> constructor, there is only one inhabitant: <code>Left ()</code>. And
looking at the <code>Right</code> constructor, there are two inhabitants: <code>Right True</code>
and <code>Right False</code>. So in total, there are <span class="math inline">\(1 + 2 = 3\)</span> inhabitants of
<code>Either () Bool</code>, so its cardinality is 3. A sharp reader may notice that <em>sum</em>
types <em>add</em> cardinalities together, and this is correct. To generalize this
for any two types <span class="math inline">\(\alpha\)</span> and <span class="math inline">\(\beta\)</span> with <code>Either</code>:
<span class="math inline">\(|Either\space\alpha\space\beta| = |\alpha| + |\beta|\)</span>. In fact, for any sum type <span class="math inline">\(S\)</span> with
<span class="math inline">\(n\)</span> constructors, <span class="math inline">\(|S|=\sum_{i=1}^n|C_i|\)</span> (where <span class="math inline">\(C_i\)</span> is the <em>ith</em> constructor).</p>
    </section>
</article>

        </main>

        <footer>
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </footer>
    </body>
</html>
